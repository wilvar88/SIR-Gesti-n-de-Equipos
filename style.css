/* =========================
   style.css — versión completa (edge-aware + z-index + enlaces OK)
   ========================= */

:root{
  --spot-size: 28px;
  --spot-outline: 3px;
  --tip-max: 320px;
  --tip-pad: 10px;
  --brand: #7367f0;         /* color principal */
  --ok: #15B79E;
  --text-dark: #0b1220;
  --text-mid: #334;
  --bg: #f6f8fb;
}

*{ box-sizing: border-box; }
html, body{ height: 100%; }

body{
  margin:0;
  font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif;
  line-height:1.45;
  color:var(--text-dark);
  background:var(--bg);
}

header, footer{
  max-width:1100px;
  margin:13px auto;
  padding:0 10px;
}

h1{ font-size: clamp(10px, 3vw, 26px); margin:.5rem 0; }
.hint{ margin:0; color:var(--text-mid); padding:.25rem 0; }

code{ background:#eef1f7; padding:.1rem .15rem; border-radius:.4rem }
kbd{ background:#111; color:#fff; padding:2px 6px; border-radius:7px; font-weight:700 }

/* ---- Lienzo principal ---- */
#board{
  position:relative;
  max-width:1200px;
  margin:1px auto;
  background:#fff;
  border-radius:19px;
  box-shadow:0 6px 24px rgba(12,21,42,.08);
  overflow:hidden;            /* recorta para que el tooltip no se salga del marco */
}

#base{ display:block; width:100%; height:auto; }

/* Capas superpuestas */
#hotspots, #actions{
  position:absolute;
  inset:0;
}

/* Orden de capas: hotspots por encima de actions */
#actions{ z-index:100; }
#hotspots{
  z-index:200;
  /* Muy importante: deja pasar clics al contenido de abajo,
     salvo en los elementos interactivos (los definimos más abajo) */
  pointer-events:none;
}

/* =========================
   HOTSPOTS
   ========================= */

.hotspot{
  position:absolute;
  width:var(--spot-size);
  height:var(--spot-size);
  margin:0;
  padding:0;
  border:0;
  border-radius:999px;
  background:var(--brand);
  box-shadow:0 0 0 var(--spot-outline) rgba(21,94,239,.2), 0 2px 8px rgba(0,0,0,.15);
  transform:translate(-50%,-50%);
  cursor:pointer;
  z-index:1;
  /* Reactiva los eventos solo en el hotspot */
  pointer-events:auto;
}
.hotspot:focus{ outline:3px solid #88a8ff; outline-offset:2px; }

/* Cuando esté abierto o con focus, súbelo sobre todo */
.hotspot.open,
.hotspot:focus-within{ z-index:10000; }

.hotspot .num{
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  font-size:11px; color:#fff; font-weight:700;
}

/* ---- Tooltip ---- */
.tip{
  position:absolute;

  /* Posición por defecto: ARRIBA y centrado respecto al hotspot */
  left:50%;
  bottom: calc(100% + 8px);
  transform: translateX(-50%);
  min-width:160px;
  max-width:var(--tip-max);
  background:#fff;
  border:1px solid #e6eaf2;
  border-radius:12px;
  padding:var(--tip-pad);
  box-shadow:0 16px 48px rgba(16,22,40,.12);
  font-size:14px;
  line-height:1.35;

  /* Oculto por defecto y sin capturar puntero */
  opacity:0;
  pointer-events:none;

  transition: opacity .15s ease;
  will-change: transform;
  z-index:1; /* con .hotspot.open ya está por encima de todo */
  word-wrap: break-word;
  overflow-wrap: anywhere;
  white-space: normal;
}

.tip h3{ margin:.1rem 0 .25rem; font-size:14px; }
.tip p{ margin:0; color:#223; }

.tip a.tip-link{
  display:inline-block;
  margin-top:8px;
  text-decoration: underline;
  font-weight:700;
  color:var(--brand);
}

/* Mostrar SOLO cuando el hotspot esté "open" (vía JS) */
.hotspot.open .tip{
  opacity:1;
  pointer-events:auto; /* el tooltip abierto sí es interactivo */
}

/* Respaldo: si el tooltip no está dentro del .hotspot y recibe .open, se muestra */
.tip.open{
  opacity:1;
  pointer-events:auto;
}

/* ---- Orientaciones alternativas (controladas por data-attributes en .hotspot) ---- */
.hotspot[data-align="right"] .tip{
  top:50%; bottom:auto; left: calc(100% + 8px);
  right:auto; transform: translateY(-50%);
}
.hotspot[data-align="left"] .tip{
  top:50%; bottom:auto; left:auto; right: calc(100% + 8px);
  transform: translateY(-50%);
}
.hotspot[data-vpos="bottom"] .tip{
  top: calc(100% + 8px); bottom:auto; left:50%; right:auto;
  transform: translateX(-50%);
}
.hotspot[data-vpos="top"] .tip{
  bottom: calc(100% + 8px); top:auto; left:50%; right:auto;
  transform: translateX(-50%);
}

/* ---- Visor de coordenadas (modo E) ---- */
#coords{
  position:absolute;
  right:8px; bottom:8px;
  background:#111; color:#fff;
  padding:12px 16px; border-radius:26px;
  font-size:12px; opacity:.85;
  z-index:120;
}

/* =========================
   BOTONES FLOTANTES (ACTIONS)
   ========================= */

.action-btn{
  position:absolute;
  transform: translate(-50%, -50%);
  display:inline-flex; align-items:center; justify-content:center;
  gap:.5rem;
  padding:.5rem .9rem;
  border-radius:999px;
  border:1px solid transparent;
  text-decoration:none;
  font-weight:600;
  font-size:10px;
  line-height:1;
  cursor:pointer;
  user-select:none
}